<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta content="notes on a paper" name="description"> <meta name="keywords" content="databaes sigmod microsoft 1998 auto-admin tuning DBMS"> <meta name="author" content="Adam Dziedzic"> <meta name="baseurl" content="/"> <title> Adam Dziedzic|AutoAdmin What-if Index Analysis Utility </title> <!-- favicon --> <link rel="shortcut icon" href="/static/assets/img/favicon.ico"> <!-- Main CSS --> <link href="/static/assets/app-20171204.min.css" rel="stylesheet"> <link href="/static/css/custom.css" rel="stylesheet"> <link rel="stylesheet" href="https://cdn.rawgit.com/jpswalsh/academicons/master/css/academicons.min.css"> <!-- Main Scripts --> <script src="/static/assets/app-20171204.min.js"></script> <script src="/static/assets/blog-20171204.min.js"></script> <!-- <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> --> <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </head> <body id="page-top" class="landing-page"> <div class="search-tool" style="position: fixed; top: 0px ; bottom: 0px; left: 0px; right: 0px; opacity: 0.95; background-color: #111111; z-index: 9999; display: none;"> <input type="text" class="form-control search-content" id="search-content" style="position: fixed; top: 60px" placeholder="Search Blog"> <div style="position: fixed; top: 16px; right: 16px; z-index: 9999;"> <img src="/static/assets/img/search/cb-close.png" id="close-btn"/> </div> </div> <div style="position: fixed; right: 16px; bottom: 20px; z-index: 9999;"> <img src="/static/assets/img/search/cb-search.png" id="search-btn" title="Double click Ctrl"/> </div> <div class="navbar-wrapper"> <nav class="navbar navbar-default navbar-fixed-top" role="navigation"> <div class="container"> <div class="navbar-header page-scroll"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="/">Adam Dziedzic</a> </div> <div id="navbar" class="navbar-collapse collapse"> <ul class="nav navbar-nav navbar-right"> <li><a class="page-scroll" href="blog/"></a></li> <li> <a class="page-scroll" href="/blog/">Blog</a></li> <li> <a class="page-scroll" href="/html/">HTML</a></li> <li> <a class="page-scroll" href="/life/">Life</a></li> <li> <a class="page-scroll" href="/machine-learning/">machine-learning</a></li> </ul> </div> </div> </nav> </div> <div class="wrapper wrapper-content animated fadeInRight article"> <div class="row"> <div class="col-lg-10 col-lg-offset-1"> <div class="ibox"> <div class="ibox-content"> <div class="pull-right"> <a class="btn btn-white btn-xs" href="//html">HTML</a> </div> <div class="text-center article-title"> <span class="text-muted"><i class="fa fa-clock-o"></i> 29 Apr 2018</span> <h1> AutoAdmin What-if Index Analysis Utility </h1> </div> <h3 id="notes-on-a-paper-autoadmin-what-if-index-analysis-utility">Notes on a paper: AutoAdmin “What-if” Index Analysis Utility</h3> <p>First, still even today the tools to analyze query performance in databases are not perfect. Let’s look at this comment from this website: https://goo.gl/6xxnS6:</p> <p><em>A whole recommendation is not very helpful. It is often suggested to create N indices to achieve an X% improvement. Of these N indexes, almost always 1 or 2 are the indices most contributing, others weigh the database work without great gain. I suggest adding a column where we can see the contribution of each index to the X% improvement. To do this today, it takes a long time, because you need it reevaluate each suggested index one by one.</em></p> <p>There was an effort in 1998 to provide a comprehensive visualisations of: workload, configurations and cost and index usage statistics.</p> <ol> <li>Workload analysis: this consists of queries and their structural properties (query type: select/update/insert/delete, it it is an aggregation query (with the group by clause) or not, whether the query has nested subqueries, columns on which join conditions exists).</li> <li>Configuration analysis: consists of indexes and their strucutral properties (size of the index, table on which the index is built, time of creation, whether or not the index is clustered).</li> <li>Cost and index usage: the most important part of the system - exhibits relationship objects that capture the interaction between a specific configuration and queries in a workload.</li> </ol> <h3 id="queries">Queries</h3> <p>Users are provided with a specialized interface to query the hypthetical designs, however, in principle, they can write the SQL queries on their own against the analysis data tables.</p> <h3 id="main-execution-estimate-configuration-set-of-indexes-for-a-query">Main execution: estimate configuration (set of indexes) for a query</h3> <ol> <li>Create all needed hypothetical indexes in the configuration.</li> <li>Request the optimizer to: <ol> <li>Restirct its choice of indexes to those in the given configuration (the database catalog cannot be modified, as the other real queries might be running in the system, but this configuations can be specified on the users session level).</li> <li>Consider the table and index sizes in the database to be adjusted by the scaling values (users can specify that a given table can grow in the future - as expected scale of the current size).</li> </ol> </li> <li>Request the optimizer to produce the optimal execution plan for the query and gather the results: <ol> <li>the cost of the query</li> <li>indexes (if any) used to answer the query</li> </ol> </li> </ol> <h3 id="adaptive-sampling-strategy-for-creating-hypothetical-indexes">Adaptive sampling strategy for creating hypothetical indexes</h3> <h4 id="side-note">Side note</h4> <p>An interseting side note is a short description of a sampling strategy (described in detail in another paper), but explained enough and worth mentioning here.</p> <h4 id="algorithm">Algorithm</h4> <p>An adaptive page-level sampling algorithm is used to efficiently gather statistical measures relevant to query optimization. Incrementally, sample of size \(\sqrt(n) = m\) is drawn, where \(n\) is the number of pages in the table. The samples are stores in a sample-table, in sorted order. The statistical measures contain, for example, equi-depth histograms. After the first sample is drawn and the statistics gathered, we draw another sample and verify if the new sample has “similar” statistical characteristics as the previously sampled data stored in sample-table (for now, the table contains just a single sample of size m). To be precise, we check if the values in the new sample are divided approximately in equal numbers in each bin of the equi-depth histogram. If the statistics are in a certain ballpark similar, we finish the algorithm. Otherwise, the last sample is merged into the sample-table and the statistics are updated. We repeat the process until the aggreement in statistics between the sample-table and a newly drawn sample is reached, all we drawn some specified number of samples.</p> <h2 id="main-takeaways">Main takeaways</h2> <p>The index anslysis utility is indespensible - and this is what this paper addresses. Analyze the impact of current or hyptothetical indexes on the performance of your workload (set of queries). This approach is based on relative estimation of the cost that enables a large class of analysis at low cost. The authors implemented a tool that can use hypothetical indexes to predict workload cost, this was achieved by using sampling based techniques.</p> <p>Thus, the most useful command provided is: Esimtate Configuration (set of indexes) of <workload_name> for <configuration_name></configuration_name></workload_name></p> <hr> <div class="row"> <div class="col-md-6"> <h5 style="display: inline;">Tags:</h5> <button class="btn btn-white btn-xs" type="button">databaes sigmod microsoft 1998 auto-admin tuning DBMS</button> </div> <div class="col-md-6"> <div class="small text-right"> <div> <i class="fa fa-comments-o"> </i> <span class="disqus-comment-count" data-disqus-url="http://localhost:4000/html/2018/04/29/auto-admin-what-if-index-analysis-utility.html">0</span> comments </div> </div> </div> </div> <br> <div class="row"> <div class="col-lg-12"> <!-- donate --> <br> <!-- share --> <div class="a2a_kit a2a_kit_size_32 a2a_default_style"> <a class="a2a_dd" href="https://www.addtoany.com/share"></a> <a class="a2a_button_facebook"></a> <a class="a2a_button_twitter"></a> <a class="a2a_button_google_plus"></a> <a class="a2a_button_linkedin"></a> <a class="a2a_button_email"></a> <a class="a2a_button_wechat"></a> <a class="a2a_button_sina_weibo"></a> <a class="a2a_button_pocket"></a> </div> <script> var a2a_config = a2a_config || {}; a2a_config.color_main = "D7E5ED"; a2a_config.color_border = "AECADB"; a2a_config.color_link_text = "333333"; a2a_config.color_link_text_hover = "333333"; </script> <script async src="https://static.addtoany.com/menu/page.js"></script> <br> <!-- comment --> <div id="disqus_thread"></div> <script> /** * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS. * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables */ /* var disqus_config = function () { this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable }; */ (function() { var d = document, s = d.createElement('script'); s.src = '//jalpc.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript> </div> </div> </div> </div> </div> </div> </div> <!-- Google analytics --> <!-- GrowingIO --> <script id="dsq-count-scr" src="https://jalpc.disqus.com/count.js" async></script> </body> </html>
